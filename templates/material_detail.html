{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBC Learning Hub - Empowering Learners</title>

    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/material_detail.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/tailwind.css' %}">
    

</head>
<body>
    <header>
        <div class="header-container">
            <a href="#" class="logo">CBC <span>Learning Hub</span></a>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="{% url 'index' %}">Home</a></li>
                    <li><a href="{% url 'subject_list' %}">Materials</a></li>
                    <li><a href="#forums">Forums</a></li>
                    <li><a href="#classes">ICT Classes</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
                    <li><a href="{% url 'account_logout' %}">logout</a></li>
                    <li class="dark-mode-toggle">
                        <svg class="dark-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm40-83q119-15 199.5-104.5T800-480q0-123-80.5-212.5T520-797v634Z"/></svg>
                        <svg class="light-icon hidden" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg>
                    </li>
                    
                </ul>
            </nav>

            <!-- This button is now responsible for the sidebar on mobile -->
            <button class="menu-btn" id="menuBtn"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <div class="sidebar" id="sidebar">
    <h4>{{ topic.subject.name }} - {{ topic.subject.grade }}</h4>
    <ul>
        {% for subtopic in subtopics %}
            <li class="topic-item">
                <ul class="subtopic-list">
                        <li class="subtopic-item">
                            <strong>{{ subtopic.name }}</strong>
                            
                            <ul class="material-list">
                                {% for material in subtopic.material_set.all|dictsort:"order" %}
                                    <li>
                                        <a href="{% url 'material_detail' material.pk %}" 
                                           class="{% if material.pk == current_material.pk %}active{% endif %}">
                                            {{ material.title }}
                                        </a>
                                    </li>
                                {% empty %}
                                    <li>No materials yet.</li>
                                {% endfor %}
                            </ul>
                        </li>
                </ul>
            </li>
        {% empty %}
            <li>No topics found for this subject.</li>
        {% endfor %}
    </ul>
</div>



    <!-- This overlay will dim the content when the sidebar is open on mobile -->
    <div class="content-overlay" id="contentOverlay"></div>

    <main class="main-content">
        <!-- Placeholder for your material content -->
        <div class="prose prose-lg max-w-none prose-green">
            {% if current_material.html_content %}
                {{ current_material.html_content|safe }}
            {% else %}
                <p>No material content found.</p>
            {% endif %}

        </div>
    
        <!-- Navigation Buttons -->
        <div class="flex flex-col sm:flex-row justify-between mt-12 pt-8 border-t border-gray-200 navigation-buttons gap-4">
    
            {% if previous_material %}
                <a href="{% url 'material_detail' previous_material.pk %}" class="bg-green-500 hover:bg-green-600 text-white font-medium px-6 py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow hover:shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                    Previous
                </a>
            {% else %}
                <span class="bg-gray-300 text-gray-500 font-medium px-6 py-3 rounded-lg flex items-center justify-center gap-2 cursor-not-allowed">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                    Previous
                </span>
            {% endif %}

            {% if next_material %}
                <a href="{% url 'material_detail' next_material.pk %}" class="bg-green-500 hover:bg-green-600 text-white font-medium px-6 py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow hover:shadow-md">
                    Next
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                </a>
            {% else %}
                <span class="bg-gray-300 text-gray-500 font-medium px-6 py-3 rounded-lg flex items-center justify-center gap-2 cursor-not-allowed">
                    Next
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>
                </span>
            {% endif %}

        </div>
    </main>
    
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-column">
                <h3>About Us</h3>
                <p>The CBC Learning Hub is dedicated to providing quality educational resources that align with Kenya's Competency-Based Curriculum.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Study Materials</a></li>
                    <li><a href="#">Forums</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Resources</h3>
                <ul class="footer-links">
                    <li><a href="#">Grade 4-6 Materials</a></li>
                    <li><a href="#">Grade 7-9 Materials</a></li>
                    <li><a href="#">Teacher Resources</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Us</h3>
                <p><i class="fas fa-map-marker-alt"></i> Nairobi, Kenya</p>
                <p><i class="fas fa-phone"></i> +254 700 123456</p>
                <p><i class="fas fa-envelope"></i> info@cbclearninghub.co.ke</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; {% now "Y" %} CBC Learning Hub. All Rights Reserved.</p>
        </div>
    </footer>

<script src="{% static 'js/materials_details.js' %}"></script>
</body>
</html>
